# Verilog代码风格

## 1. 一般规则
（待补充）

## 2. 文件头
以注释的形式对文件的内容进行简要描述，尽量简洁。
```verilog
//=============================================================================
// File Name    : {文件名}
// Created On   : {创建时间 yyyy-mm-dd hh:mm:ss}
// Last Modified: {更新日期 yyyy-mm-dd hh:mm:ss}
// Author       : {作者}
// Description  : {功能描述}
//=============================================================================
```

## 3. 宏定义
宏定义统一采用大写加下划线的形式命名，在宏定义前给出相应的注释说明变量含义。对于有单位的变量（如时间、频率等），建议在变量名结尾加上单位。
```verilog
// 系统统一用时钟上升沿
`define CLK_EDGE posedge clk
// DDR接口位宽：256bit
`define DDR_BW 256
// 时钟频率：100MHz
`define CLK_FREQ_MHZ 100
```

## 4. 模块及端口声明
一个文件只允许包含一个模块的定义，文件名应和模块名称一致。模块的命名采用小写字母和下划线组合的形式，命名应尽量简洁。

模块的参数采用大写加下划线命名，命名风格同宏定义。端口参数只允许以下两类：1. 端口位宽设置时需要用到的参数；2. 外部可配置的参数。对于端口需要用到的，但外部无法配置的参数，必须在参数注释中注明不可配置。通常这会是由可配参数推导出的参数。

模块端口采用小写字符加下划线的方式。端口名称需要表明信号含义及方向，对于有明确协议的一组信号，采用```{类型}_{协议名}_```作为前缀。对于除时钟和复位信号以外的一般信号，采用```i_```或```o_```作为前缀表示输入或输出。信号的位宽均采用```[bw-1:0]```的描述方式。应对接口信号及参数做必要的注释。对于成组的接口可以在一组信号前统一写注释。不要求所有接口信号名称对齐，但每一组信号应对齐名称。包含位宽定义的信号应对齐左右中括号。

时钟统一命名为```clk```。复位信号命名为```rst```，异步复位信号在名称上加前缀```a```，低电平有效复位加后缀```_n```。包含时钟和复位信号的模块应将两者置于模块端口最前列。包含多组复位和时钟信号的模块，应首先将不同的时钟和复位信号对应的端口信号分组放置，然后将对应时钟及复位信号放在每一组的最前列。

```verilog
module adder_tree#(
    parameter DATA_IN_W = 8,    // 输入数据位宽
    parameter DATA_NUM  = 16,   // 输入数据个数
    parameter DATA_O_W  = DATA_IN_W + $clog2(DATA_NUM)
                                // 输出数据位宽（不可配置）
    )(
    input   clk,
    input   rst_n,

    input   i_config,       // 配置脉冲，高电平有效
    input   i_round_type,   // 输出舍入类型，0: 截断，1：四舍五入

    // 输入数据，axi_stream slave接口
    input   [DATA_IN_W * DATA_NUM   -1 : 0] s_axis_din_data,
    input                                   s_axis_din_valid,
    output                                  s_axis_din_ready,

    // 输出数据，axi_stream master接口
    output  [DATA_O_W               -1 : 0] m_axis_dout_data,
    output                                  m_axis_dout_valid,
    input                                   m_axis_dout_ready,
    );

    // 模块定义...

endmodule
```

## 5. 逻辑代码

### 5.1. 变量声明

变量的命名采用小写字母和下划线组合的形式，对于以下内容采用字符串的形式

### 5.2. 例化模块

### 5.3. 代码块

## 设计规范